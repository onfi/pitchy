!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pitchy=t()}}((function(){return function t(r,e,n){function i(s,f){if(!e[s]){if(!r[s]){var a="function"==typeof require&&require;if(!f&&a)return a(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=e[s]={exports:{}};r[s][0].call(h.exports,(function(t){return i(r[s][1][t]||t)}),h,h.exports,t,r,e,n)}return e[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,r,e){"use strict";function n(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(e,"__esModule",{value:!0});var i=n(t("fft.js")),o=n(t("next-pow-2"));function s(t){var r=new i(o(2*t.length)),e=new Array(r.size);t.forEach((function(t,r){e[r]=t})),e.fill(0,t.length);var n=r.createComplexArray();r.realTransform(n,e),r.completeSpectrum(n);for(var s=0;s<n.length;s+=2)n[s]=n[s]*n[s]+n[s+1]*n[s+1],n[s+1]=0;var f=r.createComplexArray();r.inverseTransform(f,n);for(var a=new Array(t.length),u=0;u<t.length;u++)a[u]=f[2*u];return a}e.autocorrelate=s,e.findPitch=function(t,r){var e=function(t){var r=s(t),e=2*r[0];if(0===e){var n=new Array(r.length);return n.fill(0),n}return r.map((function(r,n){var i=e,o=t.length-n-1;return e-=t[n]*t[n]+t[o]*t[o],2*r/i}))}(t),n=function(t){for(var r=[],e=!1,n=void 0,i=-1,o=1;o<t.length;o++)t[o-1]<0&&t[o]>0?(e=!0,i=o,n=t[o]):t[o-1]>0&&t[o]<0?(e=!1,-1!==i&&r.push(i)):e&&t[o]>n&&(n=t[o],i=o);return r}(e);if(0===n.length)return[0,0];var i=Math.max.apply(Math,function(t){if(Array.isArray(t)){for(var r=0,e=Array(t.length);r<t.length;r++)e[r]=t[r];return e}return Array.from(t)}(n.map((function(t){return e[t]})))),o=n.find((function(t){return e[t]>=.9*i}));return[r/o,e[o]]}},{"fft.js":2,"next-pow-2":3}],2:[function(t,r,e){"use strict";function n(t){if(this.size=0|t,this.size<=1||0!=(this.size&this.size-1))throw new Error("FFT size must be a power of two and bigger than 1");this._csize=t<<1;for(var r=new Array(2*this.size),e=0;e<r.length;e+=2){const t=Math.PI*e/this.size;r[e]=Math.cos(t),r[e+1]=-Math.sin(t)}this.table=r;for(var n=0,i=1;this.size>i;i<<=1)n++;this._width=n%2==0?n-1:n,this._bitrev=new Array(1<<this._width);for(var o=0;o<this._bitrev.length;o++){this._bitrev[o]=0;for(var s=0;s<this._width;s+=2){var f=this._width-s-2;this._bitrev[o]|=(o>>>s&3)<<f}}this._out=null,this._data=null,this._inv=0}r.exports=n,n.prototype.fromComplexArray=function(t,r){for(var e=r||new Array(t.length>>>1),n=0;n<t.length;n+=2)e[n>>>1]=t[n];return e},n.prototype.createComplexArray=function(){const t=new Array(this._csize);for(var r=0;r<t.length;r++)t[r]=0;return t},n.prototype.toComplexArray=function(t,r){for(var e=r||this.createComplexArray(),n=0;n<e.length;n+=2)e[n]=t[n>>>1],e[n+1]=0;return e},n.prototype.completeSpectrum=function(t){for(var r=this._csize,e=r>>>1,n=2;n<e;n+=2)t[r-n]=t[n],t[r-n+1]=-t[n+1]},n.prototype.transform=function(t,r){if(t===r)throw new Error("Input and output buffers must be different");this._out=t,this._data=r,this._inv=0,this._transform4(),this._out=null,this._data=null},n.prototype.realTransform=function(t,r){if(t===r)throw new Error("Input and output buffers must be different");this._out=t,this._data=r,this._inv=0,this._realTransform4(),this._out=null,this._data=null},n.prototype.inverseTransform=function(t,r){if(t===r)throw new Error("Input and output buffers must be different");this._out=t,this._data=r,this._inv=1,this._transform4();for(var e=0;e<t.length;e++)t[e]/=this.size;this._out=null,this._data=null},n.prototype._transform4=function(){var t,r,e=this._out,n=this._csize,i=1<<this._width,o=n/i<<1,s=this._bitrev;if(4===o)for(t=0,r=0;t<n;t+=o,r++){const e=s[r];this._singleTransform2(t,e,i)}else for(t=0,r=0;t<n;t+=o,r++){const e=s[r];this._singleTransform4(t,e,i)}var f=this._inv?-1:1,a=this.table;for(i>>=2;i>=2;i>>=2){var u=(o=n/i<<1)>>>2;for(t=0;t<n;t+=o)for(var h=t+u,l=t,c=0;l<h;l+=2,c+=i){const t=l,r=t+u,n=r+u,i=n+u,o=e[t],s=e[t+1],h=e[r],p=e[r+1],_=e[n],v=e[n+1],d=e[i],y=e[i+1],m=o,w=s,g=a[c],b=f*a[c+1],x=h*g-p*b,A=h*b+p*g,T=a[2*c],z=f*a[2*c+1],C=_*T-v*z,E=_*z+v*T,M=a[3*c],j=f*a[3*c+1],q=d*M-y*j,I=d*j+y*M,O=m+C,R=w+E,F=m-C,P=w-E,D=x+q,N=A+I,S=f*(x-q),U=f*(A-I),L=O+D,k=R+N,B=O-D,G=R-N,H=F+U,J=P-S,K=F-U,Q=P+S;e[t]=L,e[t+1]=k,e[r]=H,e[r+1]=J,e[n]=B,e[n+1]=G,e[i]=K,e[i+1]=Q}}},n.prototype._singleTransform2=function(t,r,e){const n=this._out,i=this._data,o=i[r],s=i[r+1],f=i[r+e],a=i[r+e+1],u=o+f,h=s+a,l=o-f,c=s-a;n[t]=u,n[t+1]=h,n[t+2]=l,n[t+3]=c},n.prototype._singleTransform4=function(t,r,e){const n=this._out,i=this._data,o=this._inv?-1:1,s=2*e,f=3*e,a=i[r],u=i[r+1],h=i[r+e],l=i[r+e+1],c=i[r+s],p=i[r+s+1],_=i[r+f],v=i[r+f+1],d=a+c,y=u+p,m=a-c,w=u-p,g=h+_,b=l+v,x=o*(h-_),A=o*(l-v),T=d+g,z=y+b,C=m+A,E=w-x,M=d-g,j=y-b,q=m-A,I=w+x;n[t]=T,n[t+1]=z,n[t+2]=C,n[t+3]=E,n[t+4]=M,n[t+5]=j,n[t+6]=q,n[t+7]=I},n.prototype._realTransform4=function(){var t,r,e=this._out,n=this._csize,i=1<<this._width,o=n/i<<1,s=this._bitrev;if(4===o)for(t=0,r=0;t<n;t+=o,r++){const e=s[r];this._singleRealTransform2(t,e>>>1,i>>>1)}else for(t=0,r=0;t<n;t+=o,r++){const e=s[r];this._singleRealTransform4(t,e>>>1,i>>>1)}var f=this._inv?-1:1,a=this.table;for(i>>=2;i>=2;i>>=2){var u=(o=n/i<<1)>>>1,h=u>>>1,l=h>>>1;for(t=0;t<n;t+=o)for(var c=0,p=0;c<=l;c+=2,p+=i){var _=t+c,v=_+h,d=v+h,y=d+h,m=e[_],w=e[_+1],g=e[v],b=e[v+1],x=e[d],A=e[d+1],T=e[y],z=e[y+1],C=m,E=w,M=a[p],j=f*a[p+1],q=g*M-b*j,I=g*j+b*M,O=a[2*p],R=f*a[2*p+1],F=x*O-A*R,P=x*R+A*O,D=a[3*p],N=f*a[3*p+1],S=T*D-z*N,U=T*N+z*D,L=C+F,k=E+P,B=C-F,G=E-P,H=q+S,J=I+U,K=f*(q-S),Q=f*(I-U),V=L+H,W=k+J,X=B+Q,Y=G-K;if(e[_]=V,e[_+1]=W,e[v]=X,e[v+1]=Y,0!==c){if(c!==l){var Z=B+-f*Q,$=-G+-f*K,tt=L+-f*H,rt=-k- -f*J,et=t+h-c,nt=t+u-c;e[et]=Z,e[et+1]=$,e[nt]=tt,e[nt+1]=rt}}else{var it=L-H,ot=k-J;e[d]=it,e[d+1]=ot}}}},n.prototype._singleRealTransform2=function(t,r,e){const n=this._out,i=this._data,o=i[r],s=i[r+e],f=o+s,a=o-s;n[t]=f,n[t+1]=0,n[t+2]=a,n[t+3]=0},n.prototype._singleRealTransform4=function(t,r,e){const n=this._out,i=this._data,o=this._inv?-1:1,s=2*e,f=3*e,a=i[r],u=i[r+e],h=i[r+s],l=i[r+f],c=a+h,p=a-h,_=u+l,v=o*(u-l),d=c+_,y=p,m=-v,w=c-_,g=p,b=v;n[t]=d,n[t+1]=0,n[t+2]=y,n[t+3]=m,n[t+4]=w,n[t+5]=0,n[t+6]=g,n[t+7]=b}},{}],3:[function(t,r,e){r.exports=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}},{}]},{},[1])(1)}));